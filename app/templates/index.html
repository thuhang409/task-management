{% extends "base.html" %}

{% block content %}
<form class="search">
  <input class="form-control m-auto" type="text" name="search" placeholder="search todos" />
</form>

<div class="container groups-container">
    <div class="row groups d-flex">

      {% for grouptask in posts %}
      <div class="col group"  data-id="{{ grouptask.id }}">
        <div>
          <span class="group-name">{{grouptask.name}}</span>
          <span class="badge bg-secondary task-count"></span>
        </div>
        
        <ul class="list-group mx-auto text-light">
          {% for task in grouptask.get_tasks() %}
            <li class="list-group-item d-flex justify-content-between align-items-center" draggable="true" data-id="{{task.id}}">
              <div class="ms-2 me-auto">
                  <div class="fw-bold taskText">{{task.name}}</div>
                  <span class="badge rounded-pill bg-primary categories">{{task.category.name}}</span>
              </div>
              <span class="far fa-trash-alt delete"></span>
              <button data-bs-toggle="modal" data-bs-target="#exampleModal">
                <span class="fa-solid fa-pencil"></span>
              </button>
            </li>
          {% endfor %}
        </ul>

        <form class="add text-center my-4">
          <input class="form-control input-new-task" type="text" name="add" placeholder="Add new"/>
          <br />
          <br />
          <button class="btn btn-secondary"  style="display: none;"></button>
        </form>
      </div>
      {% endfor %}

      <div class="col new-group">
          <form class="add-group">
            <input class="form-control" type="text" name="add" placeholder="New group" id="input-new-group">
            <br>
            <button class="btn btn-secondary"  id="add-new-group">Add new</button>
          </form>
      </div>
    </div>
  <!-- Button trigger modal -->
</div>


  <!-- Modal -->
  <div class="modal edit-task" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-bs-dismiss="modal" >&times;</button>
            <!-- <h4 name="form-title" class="modal-title">Edit Note</h4> -->
          </div>
          <form>
            <div class="mb-3">
              <label class="form-label">Task name</label>
              <input type="text" class="form-control" id="task-name">
            </div>
            <div class="input-group mb-3">
              <label class="input-group-text" for="inputGroupSelect01">Tag</label>
              <select class="form-select" id="inputGroupSelect01">
                <option selected>Choose...</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
            <div class="input-group mb-3">
              <label class="input-group-text" for="inputGroupSelect01">Status</label>
              <select class="form-select" id="inputGroupSelect01">
                <option selected>Choose...</option>
                <option value="1">One</option>
                <option value="2">Two</option>
                <option value="3">Three</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="exampleFormControlTextarea1" class="form-label">Description</label>
              <textarea class="form-control" id="exampleFormControlTextarea1" rows="3"></textarea>
            </div>
            <!-- <button type="submit" class="btn btn-primary">Submit</button> -->
          </form>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save</button>
          </div>
        </div>
    </div>
  </div>  

{% endblock %}